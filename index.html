<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TikId Multi Downloader - AcdsAPIs</title>
  <link id="icon" rel="icon" href="https://image.pollinations.ai/prompt/Buat%20gambar%20youtube%20download%20yaitu%20Y7%20dengan%20desain%203d%2C%20warna%20putih%20merah%20domainan%20merah%20seperti%20logo%20play%20tapi%20lebih%20rapih?seed=1756394813856290123&enhance=true&nologo=true&model=flux" type="image/png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Noto+Sans+JP:wght@400;500;700&display=swap');

    :root {
      --primary: #e91e63;
      --primary-light: #f8bbd0;
      --secondary: #2196f3;
      --dark-bg: #0d1117;
      --dark-card: #161b22;
      --dark-text: #e6edf3;
      --light-bg: #ffffff;
      --light-card: #f9f9f9;
      --light-text: #333333;
      --accent-pink: #ff4081;
      --accent-blue: #03a9f4;
      --shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    }

    * { 
      margin: 0; 
      padding: 0; 
      box-sizing: border-box; 
    }

    body {
      font-family: 'Poppins', 'Noto Sans JP', sans-serif;
      background: var(--dark-bg);
      color: var(--dark-text);
      transition: background 0.4s, color 0.4s;
      overflow-x: hidden;
      line-height: 1.6;
    }

    body.light-mode {
      background: var(--light-bg);
      color: var(--light-text);
    }

    canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    header {
      text-align: center;
      padding: 30px 0;
    }

    .logo {
      font-size: 2.8rem;
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 10px;
      letter-spacing: 1px;
    }

    .tagline {
      font-size: 1.1rem;
      color: var(--dark-text);
      margin-bottom: 20px;
      opacity: 0.9;
    }

    body.light-mode .tagline {
      color: var(--light-text);
    }

    .owner {
      display: inline-block;
      background: rgba(233, 30, 99, 0.1);
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 0.9rem;
      color: var(--primary);
      margin-bottom: 30px;
    }

    .card {
      background: var(--dark-card);
      border-radius: 16px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: var(--shadow);
      transition: transform 0.3s, background 0.4s;
    }

    body.light-mode .card {
      background: var(--light-card);
    }

    .card:hover {
      transform: translateY(-5px);
    }

    h1 {
      font-size: 2.2rem;
      margin-bottom: 15px;
      color: var(--primary);
      text-align: center;
    }

    h2 {
      font-size: 1.6rem;
      margin-bottom: 20px;
      color: var(--secondary);
    }

    p {
      margin-bottom: 20px;
      font-size: 1.05rem;
    }

    .controls {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }

    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 500;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .btn-primary {
      background: var(--primary);
      color: white;
    }

    .btn-primary:hover {
      background: #d81b60;
      transform: translateY(-2px);
    }

    .btn-secondary {
      background: var(--secondary);
      color: white;
    }

    .btn-secondary:hover {
      background: #0b7dda;
      transform: translateY(-2px);
    }

    .btn-toggle {
      background: var(--dark-card);
      color: var(--dark-text);
      border: 2px solid var(--primary);
    }

    body.light-mode .btn-toggle {
      background: var(--light-card);
      color: var(--light-text);
    }

    .btn-toggle:hover {
      background: var(--primary);
      color: white;
    }

    form {
      margin-bottom: 30px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: var(--dark-text);
    }

    body.light-mode label {
      color: var(--light-text);
    }

    input, select {
      width: 100%;
      padding: 14px 16px;
      border-radius: 10px;
      border: 2px solid rgba(255, 255, 255, 0.1);
      background: rgba(255, 255, 255, 0.07);
      color: var(--dark-text);
      font-size: 1rem;
      transition: border 0.3s;
    }

    body.light-mode input, 
    body.light-mode select {
      border: 2px solid rgba(0, 0, 0, 0.1);
      background: rgba(0, 0, 0, 0.03);
      color: var(--light-text);
    }

    input:focus, select:focus {
      outline: none;
      border-color: var(--primary);
    }

    .result {
      display: none;
      animation: fadeIn 0.6s ease forwards;
      text-align: center;
      padding: 25px;
      border-radius: 16px;
      background: rgba(33, 150, 243, 0.1);
      margin-top: 30px;
    }

    .download-btn {
      display: inline-block;
      margin: 10px 8px;
      padding: 12px 24px;
      background: var(--primary);
      color: white;
      border-radius: 10px;
      text-decoration: none;
      font-weight: 500;
      transition: all 0.3s;
      min-width: 160px;
    }

    .download-btn:hover {
      background: #d81b60;
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(233, 30, 99, 0.3);
    }

    .download-btn.secondary {
      background: var(--secondary);
    }

    .download-btn.secondary:hover {
      background: #0b7dda;
    }

    .thumbnail {
      width: 100%;
      max-width: 300px;
      border-radius: 12px;
      margin: 15px auto;
      display: block;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }

    .image-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 10px;
      margin-top: 15px;
    }

    .image-item {
      text-align: center;
    }

    .image-item img {
      width: 100%;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }

    .image-item a {
      display: block;
      margin-top: 5px;
      font-size: 0.85rem;
      color: var(--primary);
    }

    .tutorial {
      margin-top: 50px;
    }

    .steps {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 25px;
      margin-top: 30px;
    }

    .step {
      background: var(--dark-card);
      padding: 25px;
      border-radius: 16px;
      text-align: center;
      transition: transform 0.3s, background 0.4s;
    }

    body.light-mode .step {
      background: var(--light-card);
    }

    .step:hover {
      transform: translateY(-5px);
    }

    .step-number {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: var(--primary);
      color: white;
      font-size: 1.5rem;
      font-weight: 600;
      margin: 0 auto 20px;
    }

    footer {
      text-align: center;
      padding: 40px 0 20px;
      margin-top: 60px;
      color: var(--dark-text);
      opacity: 0.8;
      font-size: 0.9rem;
    }

    body.light-mode footer {
      color: var(--light-text);
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @media (max-width: 768px) {
      .logo { font-size: 2.2rem; }
      h1 { font-size: 1.8rem; }
      h2 { font-size: 1.4rem; }
      .card { padding: 20px; }
      .btn { padding: 10px 20px; font-size: 0.95rem; }
      .steps { grid-template-columns: 1fr; }
      .image-grid { grid-template-columns: repeat(2, 1fr); }
    }
  </style>
</head>
<body>
  <canvas id="particles"></canvas>
  
  <div class="container">
    <header>
      <div class="logo">TikId</div>
      <div class="tagline" id="tagline">Multi Downloader</div>
      <div class="owner">presented by acds</div>
    </header>
    
    <div class="card">
      <h1 id="title">Multi Downloader</h1>
      <p id="desc">Masukkan URL YouTube atau TikTok untuk mengunduh video, audio, atau gambar.</p>
      
      <div class="controls">
        <button class="btn btn-toggle" id="langToggle">
          <i class="fas fa-language"></i> <span id="langText">日本語</span>
        </button>
        <button class="btn btn-toggle" id="modeToggle">
          <i class="fas fa-moon" id="modeIcon"></i> <span id="modeText">Light Mode</span>
        </button>
      </div>
      
      <form id="downloadForm">
        <div class="form-group">
          <label for="platform" id="platformLabel">Platform</label>
          <select id="platform">
            <option value="youtube">YouTube</option>
            <option value="tiktok">TikTok</option>
          </select>
        </div>

        <div class="form-group">
          <label for="ytUrl" id="urlLabel">URL</label>
          <input type="text" id="ytUrl" placeholder="Masukkan URL..." required>
        </div>
        
        <div class="form-group" id="formatGroup">
          <label for="format" id="formatLabel">Format</label>
          <select id="format">
            <option value="mp3">Audio (MP3)</option>
            <option value="mp4">Video (MP4)</option>
          </select>
        </div>
        
        <button type="submit" class="btn btn-primary" style="width: 100%">
          <i class="fas fa-download"></i> <span id="downloadText">Download</span>
        </button>
      </form>
      
      <div class="result" id="resultBox">
        <h2 id="resTitle"></h2>
        <img id="resThumbnail" class="thumbnail" style="display:none;">
        <p id="resDuration"></p>
        <div id="downloadOptions"></div>
        <div id="imageGrid" class="image-grid" style="display:none;"></div>
      </div>
    </div>
    
    <div class="tutorial">
      <h2 id="tutorialTitle">Cara Menggunakan</h2>
      <div class="steps">
        <div class="step">
          <div class="step-number">1</div>
          <h3 id="step1Title">Pilih Platform</h3>
          <p id="step1Desc">Pilih YouTube atau TikTok</p>
        </div>
        <div class="step">
          <div class="step-number">2</div>
          <h3 id="step2Title">Salin URL</h3>
          <p id="step2Desc">Salin URL konten yang ingin diunduh</p>
        </div>
        <div class="step">
          <div class="step-number">3</div>
          <h3 id="step3Title">Download</h3>
          <p id="step3Desc">Pilih format dan klik download</p>
        </div>
      </div>
    </div>
    
    <footer>
      <p>TikId Multi Downloader © 2024 - Powered by acds-team</p>
    </footer>
  </div>

  <script>
    // DOM Elements
    const form = document.getElementById("downloadForm");
    const platformSelect = document.getElementById("platform");
    const ytUrl = document.getElementById("ytUrl");
    const format = document.getElementById("format");
    const formatGroup = document.getElementById("formatGroup");
    const resultBox = document.getElementById("resultBox");
    const resTitle = document.getElementById("resTitle");
    const resThumbnail = document.getElementById("resThumbnail");
    const resDuration = document.getElementById("resDuration");
    const downloadOptions = document.getElementById("downloadOptions");
    const imageGrid = document.getElementById("imageGrid");

    const langToggle = document.getElementById("langToggle");
    const langText = document.getElementById("langText");
    const modeToggle = document.getElementById("modeToggle");
    const modeIcon = document.getElementById("modeIcon");
    const modeText = document.getElementById("modeText");
    const title = document.getElementById("title");
    const desc = document.getElementById("desc");
    const tagline = document.getElementById("tagline");
    const platformLabel = document.getElementById("platformLabel");
    const urlLabel = document.getElementById("urlLabel");
    const formatLabel = document.getElementById("formatLabel");
    const downloadText = document.getElementById("downloadText");
    const tutorialTitle = document.getElementById("tutorialTitle");
    const step1Title = document.getElementById("step1Title");
    const step1Desc = document.getElementById("step1Desc");
    const step2Title = document.getElementById("step2Title");
    const step2Desc = document.getElementById("step2Desc");
    const step3Title = document.getElementById("step3Title");
    const step3Desc = document.getElementById("step3Desc");

    let lang = "id";

    // Language content
    const content = {
      id: {
        title: "Multi Downloader",
        tagline: "Multi Downloader",
        desc: "Masukkan URL YouTube atau TikTok untuk mengunduh video, audio, atau gambar.",
        platformLabel: "Platform",
        urlLabel: "URL",
        formatLabel: "Format",
        downloadText: "Download",
        tutorialTitle: "Cara Menggunakan",
        step1Title: "Pilih Platform",
        step1Desc: "Pilih YouTube atau TikTok",
        step2Title: "Salin URL",
        step2Desc: "Salin URL konten yang ingin diunduh",
        step3Title: "Download",
        step3Desc: "Pilih format dan klik download",
        langText: "日本語",
        modeText: "Light Mode",
        noWm: "Tanpa Watermark",
        withWm: "Dengan Watermark",
        hd: "HD",
        images: "Unduh Gambar",
        audio: "Audio"
      },
      jp: {
        title: "マルチダウンローダー",
        tagline: "Hookrest APIによるマルチダウンローダー",
        desc: "YouTubeまたはTikTokのURLを入力して、動画、音声、または画像をダウンロードしてください。",
        platformLabel: "プラットフォーム",
        urlLabel: "URL",
        formatLabel: "フォーマット",
        downloadText: "ダウンロード",
        tutorialTitle: "使い方",
        step1Title: "プラットフォームを選択",
        step1Desc: "YouTubeまたはTikTokを選択",
        step2Title: "URLをコピー",
        step2Desc: "ダウンロードしたいコンテンツのURLをコピー",
        step3Title: "ダウンロード",
        step3Desc: "形式を選択してダウンロードボタンをクリック",
        langText: "Indonesia",
        modeText: "ライトモード",
        noWm: "ウォーターマークなし",
        withWm: "ウォーターマークあり",
        hd: "HD",
        images: "画像をダウンロード",
        audio: "音声"
      }
    };

    // Update format options based on platform
    platformSelect.addEventListener("change", () => {
      const platform = platformSelect.value;
      formatGroup.style.display = platform === "youtube" ? "block" : "none";
      updateContent();
    });

    // Switch Bahasa
    langToggle.addEventListener("click", () => {
      lang = lang === "id" ? "jp" : "id";
      updateContent();
    });

    // Update content
    function updateContent() {
      const c = content[lang];
      title.textContent = c.title;
      tagline.textContent = c.tagline;
      desc.textContent = c.desc;
      platformLabel.textContent = c.platformLabel;
      urlLabel.textContent = c.urlLabel;
      formatLabel.textContent = c.formatLabel;
      downloadText.textContent = c.downloadText;
      tutorialTitle.textContent = c.tutorialTitle;
      step1Title.textContent = c.step1Title;
      step1Desc.textContent = c.step1Desc;
      step2Title.textContent = c.step2Title;
      step2Desc.textContent = c.step2Desc;
      step3Title.textContent = c.step3Title;
      step3Desc.textContent = c.step3Desc;
      langText.textContent = c.langText;
      modeText.textContent = document.body.classList.contains("light-mode") 
        ? (lang === "id" ? "Dark Mode" : "ダークモード")
        : c.modeText;
    }

    // Dark/Light Mode
    modeToggle.addEventListener("click", () => {
      document.body.classList.toggle("light-mode");
      const isLight = document.body.classList.contains("light-mode");
      modeIcon.classList.toggle("fa-moon", !isLight);
      modeIcon.classList.toggle("fa-sun", isLight);
      modeText.textContent = isLight 
        ? (lang === "id" ? "Dark Mode" : "ダークモード")
        : (lang === "id" ? "Light Mode" : "ライトモード");
    });

    // Handle Submit
    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      const url = ytUrl.value.trim();
      const platform = platformSelect.value;
      const type = format.value;

      if (!url) return;

      // Validate URL
      const validDomains = platform === "youtube" 
        ? ['youtube.com', 'youtu.be'] 
        : ['tiktok.com', 'vt.tiktok.com'];
      if (!validDomains.some(d => url.includes(d))) {
        showError(lang === "id" 
          ? `URL harus dari ${platform === "youtube" ? "YouTube" : "TikTok"}!` 
          : `URLは${platform === "youtube" ? "YouTube" : "TikTok"}である必要があります！`);
        return;
      }

      const submitBtn = form.querySelector('button[type="submit"]');
      const originalText = submitBtn.innerHTML;
      submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Memproses...';
      submitBtn.disabled = true;
      resultBox.style.display = "none";
      downloadOptions.innerHTML = "";
      imageGrid.innerHTML = "";
      resThumbnail.style.display = "none";

      const proxyUrl = 'https://api.allorigins.win/raw?url=';
      let apiUrl = "";

      try {
        if (platform === "youtube") {
          apiUrl = type === "mp3" 
            ? `https://hookrest.my.id/dowload/ytmp3?url=${encodeURIComponent(url)}`
            : `https://hookrest.my.id/dowload/ytmp4?url=${encodeURIComponent(url)}`;
        } else {
          apiUrl = `https://api-hookrest-danz.biz.id/download/tiktok?url=${encodeURIComponent(url)}`;
        }

        const res = await fetch(proxyUrl + encodeURIComponent(apiUrl));
        if (!res.ok) throw new Error(`HTTP ${res.status}`);

        const data = await res.json();

        if ((platform === "youtube" && data.status) || (platform === "tiktok" && data.status)) {
          if (platform === "youtube") {
            handleYouTubeResult(data, type);
          } else {
            handleTikTokResult(data.result.data);
          }
        } else {
          showError(data.message || (lang === "id" ? "Gagal memproses" : "処理に失敗しました"));
        }
      } catch (err) {
        console.error(err);
        showError(lang === "id" ? "Koneksi gagal!" : "接続エラー！");
      } finally {
        submitBtn.innerHTML = originalText;
        submitBtn.disabled = false;
      }
    });

    function handleYouTubeResult(data, type) {
      resTitle.textContent = data.meta?.title || (type === "mp3" ? "Audio YouTube" : "Video YouTube");
      resDuration.textContent = type === "mp3" 
        ? `Durasi: ${data.meta?.duration?.toFixed(2) || 'N/A'} detik | Ukuran: ${data.meta?.size || 'N/A'}`
        : `Kualitas: ${data.download?.quality || 'N/A'} | MIME: ${data.download?.mimeType?.split(';')[0] || 'video/mp4'}`;
      
      const btn = createDownloadBtn(data.download.url, type === "mp3" ? "Download MP3" : "Download MP4");
      downloadOptions.appendChild(btn);
      resultBox.style.display = "block";
    }

    function handleTikTokResult(data) {
      resTitle.textContent = data.title || "TikTok Media";
      resDuration.textContent = `Durasi: ${data.duration || 0}s | Author: ${data.author?.nickname || 'Unknown'}`;
      
      if (data.cover) {
        resThumbnail.src = data.cover;
        resThumbnail.style.display = "block";
      }

      downloadOptions.innerHTML = "";
      const c = content[lang];

      // Video downloads
      if (data.play) {
        downloadOptions.appendChild(createDownloadBtn(data.play, `Video ${c.noWm}`));
      }
      if (data.wmplay) {
        downloadOptions.appendChild(createDownloadBtn(data.wmplay, `Video ${c.withWm}`, "secondary"));
      }
      if (data.hdplay && data.hdplay !== data.play) {
        downloadOptions.appendChild(createDownloadBtn(data.hdplay, `Video ${c.hd}`));
      }
      if (data.music) {
        downloadOptions.appendChild(createDownloadBtn(data.music, `${c.audio} (MP3)`));
      }

      // Images (slideshow)
      if (data.images && data.images.length > 0) {
        imageGrid.style.display = "grid";
        data.images.forEach((img, i) => {
          const div = document.createElement("div");
          div.className = "image-item";
          div.innerHTML = `
            <img src="${img}" alt="Image ${i+1}">
            <a href="${img}" download>Download #${i+1}</a>
          `;
          imageGrid.appendChild(div);
        });
      } else {
        imageGrid.style.display = "none";
      }

      resultBox.style.display = "block";
    }

    function createDownloadBtn(url, text, variant = "") {
      const a = document.createElement("a");
      a.href = url;
      a.className = `download-btn ${variant}`;
      a.target = "_blank";
      a.innerHTML = `<i class="fas fa-download"></i> ${text}`;
      return a;
    }

    function showError(msg) {
      resTitle.textContent = msg;
      resDuration.textContent = lang === "id" ? "Coba lagi dengan URL lain" : "別のURLでお試しください";
      downloadOptions.innerHTML = "";
      imageGrid.innerHTML = "";
      resThumbnail.style.display = "none";
      resultBox.style.display = "block";
    }

    // Particle Background (unchanged)
    const canvas = document.getElementById('particles');
    const ctx = canvas.getContext('2d');
    let particlesArray = [];
    let animationId;

    function setupCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }

    class Particle {
      constructor(x, y, dx, dy, size, color) {
        this.x = x; this.y = y; this.dx = dx; this.dy = dy;
        this.size = size; this.color = color;
      }
      draw() {
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        ctx.fillStyle = this.color;
        ctx.fill();
      }
      update() {
        if (this.x > canvas.width || this.x < 0) this.dx = -this.dx;
        if (this.y > canvas.height || this.y < 0) this.dy = -this.dy;
        this.x += this.dx; this.y += this.dy;
        this.draw();
      }
    }

    function init() {
      particlesArray = [];
      const num = Math.min((canvas.width * canvas.height) / 15000, window.innerWidth < 768 ? 30 : 100);
      for (let i = 0; i < num; i++) {
        const size = window.innerWidth < 768 ? 1.5 : 2;
        const x = Math.random() * (innerWidth - size * 2);
        const y = Math.random() * (innerHeight - size * 2);
        const dx = (Math.random() - 0.5) * (window.innerWidth < 768 ? 0.8 : 1);
        const dy = (Math.random() - 0.5) * (window.innerWidth < 768 ? 0.8 : 1);
        const color = document.body.classList.contains('light-mode') 
          ? 'rgba(233, 30, 99, 0.6)' : 'rgba(33, 150, 243, 0.6)';
        particlesArray.push(new Particle(x, y, dx, dy, size, color));
      }
    }

    function connect() {
      for (let a = 0; a < particlesArray.length; a++) {
        for (let b = a; b < particlesArray.length; b++) {
          const distance = ((particlesArray[a].x - particlesArray[b].x) ** 2) + ((particlesArray[a].y - particlesArray[b].y) ** 2);
          if (distance < (canvas.width/7) * (canvas.height/7)) {
            ctx.strokeStyle = document.body.classList.contains('light-mode') 
              ? 'rgba(233, 30, 99, 0.2)' : 'rgba(33, 150, 243, 0.2)';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(particlesArray[a].x, particlesArray[a].y);
            ctx.lineTo(particlesArray[b].x, particlesArray[b].y);
            ctx.stroke();
          }
        }
      }
    }

    function animate() {
      ctx.clearRect(0, 0, innerWidth, innerHeight);
      particlesArray.forEach(p => p.update());
      connect();
      animationId = requestAnimationFrame(animate);
    }

    function startAnimation() {
      if (animationId) cancelAnimationFrame(animationId);
      setupCanvas(); init(); animate();
    }

    setupCanvas(); init(); animate();
    window.addEventListener('resize', startAnimation);
    document.addEventListener('visibilitychange', () => {
      if (document.hidden) cancelAnimationFrame(animationId);
      else animate();
    });

    // Init
    updateContent();
  </script>
</body>
</html>
